package axis.module.modules.exploits;

import axis.Axis;
import axis.event.events.UpdateEvent;
import axis.management.managers.ModuleManager.Category;
import axis.module.Module;
import net.minecraft.entity.EntityLivingBase;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.network.play.client.C03PacketPlayer;

public class Paralyze extends Module {

	public Paralyze() {
		super("Paralyze", 9623002, Category.EXPLOITS);
	}

	public void onUpdate(UpdateEvent event) {
		for (Object o : mc.theWorld.loadedEntityList) {
			if ((o instanceof EntityLivingBase))
			{
				EntityLivingBase entity = (EntityLivingBase)o;
				if ((mc.thePlayer.onGround) && (entity.getDistanceToEntity(mc.thePlayer) < 1.0F)) {
					for (int i = 0; i < 1000; i++) {
						if (isValidEntity((EntityLivingBase) entity) && Axis.getAxis().getModuleManager().getModuleByName("Paralyze").isEnabled()) {
							mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer(true));
						} else {
							break;
						}
					}
				}
			}
		}
	}

	public boolean isValidEntity(EntityLivingBase entity) {
		if (entity == null)
			return false;
		if (entity == mc.thePlayer)
			return false;
		if (!entity.isEntityAlive())
			return false;
		if (entity instanceof EntityPlayer) {
			return true;
		}
		return false;
	}

}

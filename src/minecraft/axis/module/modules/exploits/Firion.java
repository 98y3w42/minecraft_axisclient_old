package axis.module.modules.exploits;

import axis.Axis;
import axis.event.events.UpdateEvent;
import axis.management.managers.ModuleManager.Category;
import axis.module.Module;
import axis.util.TimeHelper;
import net.minecraft.client.Minecraft;
import net.minecraft.client.entity.EntityPlayerSP;
import net.minecraft.client.network.NetHandlerPlayClient;
import net.minecraft.entity.DataWatcher;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.potion.Potion;
import net.minecraft.potion.PotionEffect;

public class Firion
		extends Module {
	private String potionName = "";
	Minecraft mc = Minecraft.getMinecraft();
	private final TimeHelper time = new TimeHelper();
	private final TimeHelper time2 = new TimeHelper();

	public Firion() {
		super("Firion", 9623002, Category.EXPLOITS);
	}

	public void update(UpdateEvent e) {
		Potion[] var5 = Potion.potionTypes;
		int var4 = Potion.potionTypes.length;
		for (int var3 = 0; var3 < var4; var3++) {
			Potion x = var5[var3];
			if ((x != null) && (x.isBadEffect())) {
				this.potionName = x.getName();
				PotionEffect effect = this.mc.thePlayer.getActivePotionEffect(x);
				if (effect != null) {
					if ((this.time.hasReached(1000.0F)) && (effect.getDuration() < 10000)) {
						this.time.reset();
					}
					if (Potion.potionTypes[effect.getPotionID()].getId() == Potion.moveSlowdown.getId()) {
						Potion.moveSlowdown.removeAttributesModifiersFromEntity(this.mc.thePlayer,
								this.mc.thePlayer.getAttributeMap(), 255);
						this.mc.thePlayer.setAIMoveSpeed(0.13000001F);
					}
					if (Potion.potionTypes[effect.getPotionID()].getId() == Potion.jump.getId()) {
						this.mc.thePlayer.getDataWatcher().updateObject(8, Byte.valueOf((byte) 1));
						this.mc.thePlayer.removePotionEffectClient(Potion.jump.id);
						Potion.jump.removeAttributesModifiersFromEntity(this.mc.thePlayer, this.mc.thePlayer.getAttributeMap(),
								255);
					}
					if ((effect.getDuration() < 10000) && (this.mc.thePlayer.onGround)) {
						for (int i = 0; i < effect.getDuration() / 20; i++) {
							this.mc.getNetHandler().addToSendQueue(new C03PacketPlayer(this.mc.thePlayer.onGround));
						}
					}
				}
			}
		}
		if (this.mc.thePlayer.isBurning()) {
			if ((this.time2.hasReached(5000.0F)) &&
					(this.mc.thePlayer.getActivePotionEffect(Potion.fireResistance) == null)) {
				this.time2.reset();
			}
			if (this.mc.thePlayer.getActivePotionEffect(Potion.fireResistance) == null) {
				for (int var9 = 0; var9 < 120; var9++) {
					this.mc.getNetHandler().addToSendQueue(new C03PacketPlayer(this.mc.thePlayer.onGround));
				}
			}
		}
	}
}
